<div class="poll main-box">
    <!-- If not authorized yet -->
    <app-auth-required *ngIf="!auth.hasToken()"></app-auth-required>

    <!-- While still waiting for server -->
    <h2 *ngIf="!poll && !error">Loading...</h2>

    <!-- Main content -->
    <span *ngIf="poll">
        <h2>{{poll.name}}</h2>
        <p *ngIf="poll.description" class="desc">{{poll.description}}</p>

        <!-- Option list for those unable to vote. -->
        <ul *ngIf="!poll.can_vote || poll.has_voted">
            <li *ngFor="let option of poll.options">{{option}}</li>
        </ul>

        <!-- Option list for First Past the Post voters -->
        <app-single-choice
            *ngIf="poll.can_vote && poll.method=='fptp'"
            [options]="poll.options"
            (vote)="voteSingle($event)">
        </app-single-choice>
        <app-owner-options *ngIf="poll.own"></app-owner-options>
    </span>

</div>
